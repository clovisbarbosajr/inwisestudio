<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>INWISE STUDIO — Gerador de Imagens</title>

<style>
:root{
  --brand:#00CFFF; --brand-weak:rgba(0,207,255,.35);
  --bg:#0a1a33; --surface:#0f2b4f; --text:#fff; --muted:rgba(255,255,255,.78);
  --border:rgba(255,255,255,.08); --r-lg:16px; --r-md:12px;
}
html,body{
  height:100%;
  background:
    radial-gradient(1200px 600px at 70% -20%, rgba(0,207,255,.10), transparent 60%),
    radial-gradient(800px 500px at 20% 120%, rgba(0,207,255,.08), transparent 60%),
    linear-gradient(180deg, #0a1a33 0%, #081427 100%);
  color:var(--text);
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
  overflow-x:hidden;
}
#sparkles{position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.7;filter:drop-shadow(0 0 8px rgba(0,207,255,.6))}
.wrap{position:relative;z-index:1;max-width:1100px;margin:36px auto;padding:0 16px}
header{text-align:center;margin-bottom:22px}
.title{font-weight:900;font-size:clamp(26px,4vw,40px);
background:linear-gradient(135deg,var(--brand),#68e3ff);-webkit-background-clip:text;background-clip:text;color:transparent}
.subtitle{color:var(--muted)}
.grid{display:grid;gap:18px}
@media(min-width:1000px){.grid{grid-template-columns:420px 1fr}}
.panel{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));
border:1px solid var(--border);border-radius:var(--r-lg);
backdrop-filter:blur(8px);box-shadow:0 20px 60px rgba(0,0,0,.35), 0 0 0 1px rgba(0,207,255,.06) inset}
.left{padding:18px}.right{padding:18px}
.panel-title{font-size:20px;font-weight:800;color:#c9f6ff;margin-bottom:6px}
.panel-sub{color:var(--muted);margin-bottom:12px}
.section-title{margin:12px 0 6px;font-weight:800;color:#c9f6ff}
.input, textarea{width:100%;color:var(--text);background:rgba(255,255,255,.04);
border:1px solid var(--border);border-radius:var(--r-md);padding:10px 12px}
textarea{min-height:110px;resize:vertical}
.upload{border:1px dashed var(--brand-weak);border-radius:12px;color:var(--muted);
padding:16px;text-align:center;background:rgba(0,207,255,.03);cursor:pointer}
.upload:hover{background:rgba(0,207,255,.06)}
.preview{display:block;max-width:100%;border-radius:10px;margin-top:10px;border:1px solid var(--border)}
.placeholder{border:1px dashed var(--brand-weak);border-radius:14px;padding:38px;text-align:center;
color:var(--muted);background:rgba(0,207,255,.03)}
.loading{display:none;gap:8px;align-items:center;color:var(--muted)}
.imgbox{display:none}.imgbox img{max-width:100%;border-radius:12px;border:1px solid var(--border)}
.actions{display:flex;gap:10px;margin-top:10px}
.action{flex:1;background:rgba(255,255,255,.05);border:1px solid var(--border);
color:var(--text);padding:10px 12px;border-radius:12px;cursor:pointer}
.btn{
display:inline-flex;gap:8px;align-items:center;justify-content:center;width:100%;padding:12px 14px;margin-top:12px;
border:1px solid var(--brand-weak);
background:radial-gradient(120% 120% at 50% 0%, rgba(0,207,255,.22), rgba(0,207,255,.07) 55%, rgba(0,207,255,.04) 100%);
color:var(--text);font-weight:800;letter-spacing:.3px;cursor:pointer;
box-shadow:0 8px 26px rgba(0,207,255,.12), 0 0 0 1px rgba(0,207,255,.10) inset;transition:.2s}
.btn:hover{transform:translateY(-1px);box-shadow:0 14px 36px rgba(0,207,255,.18)}
.tilt{position:relative;transform-style:preserve-3d;transition:transform .18s ease, box-shadow .18s ease,border-color .18s ease}
.tilt::after{content:"";position:absolute;inset:-1px;border-radius:inherit;
background:radial-gradient(340px 180px at var(--spot-x,50%) var(--spot-y,50%), rgba(0,207,255,.18), transparent 60%);
pointer-events:none;mix-blend-mode:screen;opacity:.6;transition:opacity .18s ease}
.tilt:hover::after{opacity:.9}
.spinner{width:16px;height:16px;border:2px solid rgba(255,255,255,.25);border-top-color:var(--brand);
border-radius:50%;animation:spin 1.4s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.hint{font-size:12px;color:var(--muted);margin-top:6px}
footer{text-align:center;margin-top:20px;font-size:13px;color:var(--muted)}
</style>
</head>
<body>
<canvas id="sparkles"></canvas>
<div class="wrap">
  <header>
    <h1 class="title">INWISE STUDIO</h1>
    <p class="subtitle">Gerador de Imagens Profissional com NanoBanana</p>
  </header>

  <div class="grid">
    <!-- Painel Esquerdo -->
    <div class="panel left">
      <div class="panel-title">Painel de Controle</div>
      <div class="panel-sub">Crie, edite ou una imagens com o NanoBanana</div>

      <div class="section-title">Qual a sua ideia:</div>
      <textarea id="prompt" class="input" placeholder=""></textarea>

      <div class="section-title">Upload local (Image-to-Image)</div>
      <div class="upload tilt" onclick="document.getElementById('imageUpload').click()">
        Clique ou arraste uma imagem
        <input id="imageUpload" type="file" accept="image/*" hidden onchange="handleImageUpload(this,'imagePreview')"/>
        <img id="imagePreview" class="preview"/>
      </div>

      <div class="section-title">Image URL (pública)</div>
      <input id="imageUrl" class="input tilt" placeholder="https://example.com/image.jpg"/>

      <div class="section-title">Compose (mesclar duas imagens)</div>
      <div class="upload tilt" onclick="document.getElementById('imageUpload1').click()">Primeira imagem
        <input id="imageUpload1" type="file" accept="image/*" hidden onchange="handleImageUpload(this,'imagePreview1')"/>
        <img id="imagePreview1" class="preview"/>
      </div>
      <div class="upload tilt" onclick="document.getElementById('imageUpload2').click()">Segunda imagem
        <input id="imageUpload2" type="file" accept="image/*" hidden onchange="handleImageUpload(this,'imagePreview2')"/>
        <img id="imagePreview2" class="preview"/>
      </div>

      <button id="generateBtn" class="btn tilt" onclick="generate()">
        <span id="genSpin" class="spinner" style="display:none"></span>
        <span>Gerar Imagem</span>
      </button>
    </div>

    <!-- Painel Direito -->
    <div class="panel right">
      <div id="placeholder" class="placeholder tilt">Sua arte aparecerá aqui</div>
      <div id="loading" class="loading"><div class="spinner"></div><div>Gerando...</div></div>
      <div id="imgbox" class="imgbox">
        <img id="out" alt="Gerado"/>
        <div class="actions">
          <button class="action tilt" onclick="downloadImage()">Download</button>
          <button class="action tilt" onclick="resetUI()">Nova</button>
        </div>
      </div>
    </div>
  </div>
  <footer>© 2025 — INWISE</footer>
</div>

<script>
// Sparkles lentos e visíveis
(function(){
const c=document.getElementById('sparkles'),ctx=c.getContext('2d');let w,h,stars;const dpr=Math.min(2,devicePixelRatio||1);
function size(){w=c.width=innerWidth*dpr;h=c.height=innerHeight*dpr;c.style.width=innerWidth+'px';c.style.height=innerHeight+'px';ctx.scale(dpr,dpr);make();}
function make(){const n=Math.round((innerWidth*innerHeight)/25000);stars=Array.from({length:n},()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*1.4+.4,a:Math.random()*6,s:Math.random()*.3+.05}))}
function draw(){ctx.clearRect(0,0,innerWidth,innerHeight);stars.forEach(s=>{s.a+=s.s*.02;const tw=(Math.sin(s.a)*.5+.5)*.7+.3;ctx.beginPath();ctx.arc(s.x,s.y,s.r*tw,0,Math.PI*2);ctx.fillStyle=`rgba(0,207,255,${.55*tw})`;ctx.fill();});requestAnimationFrame(draw);}
addEventListener('resize',size);size();draw();
})();

// Tilt + Glow
(function(){
const MAX=10;
function setSpot(el,e){const r=el.getBoundingClientRect();const x=((e.clientX-r.left)/r.width)*100;const y=((e.clientY-r.top)/r.height)*100;
el.style.setProperty('--spot-x',x+'%');el.style.setProperty('--spot-y',y+'%');
const dx=(x/50)-1;const dy=(y/50)-1;el.style.transform=`rotateX(${-MAX*dy}deg) rotateY(${MAX*dx}deg)`;}
function reset(el){el.style.transform='rotateX(0) rotateY(0)';}
document.querySelectorAll('.tilt,.btn,.action').forEach(el=>{
el.addEventListener('mousemove',e=>setSpot(el,e));
el.addEventListener('mouseleave',()=>reset(el));});
})();

// Upload handler
function handleImageUpload(input,target){const img=document.getElementById(target);const f=input.files[0];if(!f){img.src='';return;}
const r=new FileReader();r.onload=e=>img.src=e.target.result;r.readAsDataURL(f);}

// UI helpers
function ui(state){
const ph=document.getElementById('placeholder'),load=document.getElementById('loading'),box=document.getElementById('imgbox'),spin=document.getElementById('genSpin');
if(state==='loading'){ph.style.display='none';box.style.display='none';load.style.display='flex';spin.style.display='inline-block';}
else if(state==='show'){load.style.display='none';spin.style.display='none';ph.style.display='none';box.style.display='block';}
else {load.style.display='none';spin.style.display='none';box.style.display='none';ph.style.display='block';document.getElementById('out').src='';}}
function resetUI(){ui('idle');['imageUpload','imageUpload1','imageUpload2'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});
['imagePreview','imagePreview1','imagePreview2'].forEach(id=>{const el=document.getElementById(id);if(el)el.src='';});document.getElementById('imageUrl').value='';}
function downloadImage(){const a=document.createElement('a');a.href=document.getElementById('out').src;a.download='inwise-image.png';a.click();}
function fileToBase64(file){return new Promise((res,rej)=>{const r=new FileReader();r.onload=e=>res(e.target.result);r.onerror=rej;r.readAsDataURL(file);});}
async function composeTwo(pre1,pre2){
return new Promise((resolve,reject)=>{
const img1=new Image(),img2=new Image();
img1.onload=()=>{img2.onload=()=>{
const w=Math.max(img1.width,img2.width),h=Math.max(img1.height,img2.height);
const c=document.createElement('canvas');c.width=w;c.height=h;const ctx=c.getContext('2d');
ctx.drawImage(img1,0,0,w,h);ctx.globalAlpha=0.5;ctx.drawImage(img2,0,0,w,h);ctx.globalAlpha=1.0;
resolve(c.toDataURL('image/png'));};img2.onerror=reject;img2.src=pre2;};img1.onerror=reject;img1.src=pre1;});}

// Main generate
async function generate(){
const prompt=(document.getElementById('prompt').value||'').trim();
const imgUpload=document.getElementById('imageUpload');
const imgU1=document.getElementById('imageUpload1');
const imgU2=document.getElementById('imageUpload2');
const urlInput=(document.getElementById('imageUrl').value||'').trim();
if(!prompt){alert('Informe um prompt.');return;}
ui('loading');
try{
const hasCompose=imgU1.files[0]&&imgU2.files[0];
if(hasCompose){
const blended=await composeTwo(document.getElementById('imagePreview1').src,document.getElementById('imagePreview2').src);
const res=await fetch('https://openrouter.ai/api/v1/images', {
method:'POST',
headers:{'Authorization':'Bearer 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',
'Content-Type':'application/json'},
body:JSON.stringify({model:'gryphe/mythomax-l2-13b',prompt,images:[blended]})
});
const blob=await res.blob();
document.getElementById('out').src=URL.createObjectURL(blob);ui('show');return;
}
if(imgUpload.files[0]){
const b64=await fileToBase64(imgUpload.files[0]);
const res=await fetch(`https://nano-bnana.fak-official.workers.dev/image?prompt=${encodeURIComponent(prompt)}`,{
method:'POST',body:b64});
const blob=await res.blob();
document.getElementById('out').src=URL.createObjectURL(blob);ui('show');return;
}
if(urlInput){
const res=await fetch(`https://nano-bnana.fak-official.workers.dev/image?prompt=${encodeURIComponent(prompt)}&imageUrl=${encodeURIComponent(urlInput)}`);
const blob=await res.blob();
document.getElementById('out').src=URL.createObjectURL(blob);ui('show');return;
}
const res=await fetch(`https://nano-bnana.fak-official.workers.dev/image?prompt=${encodeURIComponent(prompt)}`);
const blob=await res.blob();
document.getElementById('out').src=URL.createObjectURL(blob);ui('show');
}catch(err){ui('idle');alert('Erro: '+err.message);}
}
</script>
</body>
</html>
